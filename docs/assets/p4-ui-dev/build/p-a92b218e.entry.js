import{r as t,c as s,h as i,H as o,g as n}from"./p-29952b49.js";const h=class{constructor(i){t(this,i),this.p4ItemClick=s(this,"p4:dropdown:item-click",7),this.hasFocus=!1,this.isOpen=!1,this.size="md",this.listVariant="default",this.itemVariant="default",this.disabled=!1,this.showLoader=!1,this.data=[],this.itemClickHandler=t=>{this.disabled||this.p4ItemClick.emit(t)},this.closeList=()=>{!this.disabled&&this.isOpen&&(this.isOpen=!1,setTimeout((()=>{this.setFocus()}),100))},this.openList=()=>{console.log("open"),this.disabled||this.isOpen||(this.isOpen=!0)},this.toggleList=()=>{this.isOpen?this.closeList():this.openList()},this.blurHandler=()=>{this.hasFocus=!1},this.focusHandler=()=>{this.hasFocus=!0}}windowClick(t){t.target.closest("p4-dropdown")!==this.elm&&this.closeList()}async setFocus(){this.displayElement.focus()}async setOpen(t=!0){this.isOpen=t}render(){return i(o,{"aria-disabled":this.disabled?"true":null,class:{"has-focus":this.hasFocus}},i("div",{class:"dropdown"},i("button",{class:"dropdown-button",ref:t=>this.displayElement=t,onKeyDown:t=>{"Enter"===t.key?(t.preventDefault(),this.toggleList()):"ArrowDown"===t.key?this.isOpen&&(t.preventDefault(),this.listElement.setFocus()):"ArrowUp"===t.key&&this.isOpen&&(t.preventDefault(),this.listElement.setFocus(!0))},onBlur:this.blurHandler,onFocus:this.focusHandler,onClick:this.toggleList},i("div",{class:"slot-container"},i("slot",null))),this.isOpen&&this.getOptions()))}getOptions(){if("string"!=typeof this.data)return i("div",{class:"select-options"},i("p4-list",{ref:t=>this.listElement=t,data:this.data,variant:this.listVariant,itemVariant:this.itemVariant,"onP4:item-click":t=>{this.closeList(),this.itemClickHandler(t.detail.item),setTimeout((()=>{this.setFocus()}),100)}}))}get elm(){return n(this)}};h.style=":host{display:inline-block}.dropdown{position:relative;height:100%;width:100%}.dropdown .dropdown-button{border:none;background:none;height:100%;width:100%}.dropdown .select-options{position:absolute;width:max-content;line-height:0;top:calc(100% + var(--space-1));left:0;z-index:1000}.dropdown.input-variant-no-border{border-style:none;box-shadow:none}:host(.has-focus) .dropdown .input{outline:0}:host(.has-focus) .dropdown .input:not(.input-disabled):not(.input-variant-no-border){border-color:var(--color-primary-300);box-shadow:-1px 0px 0px var(--color-neutral-300)}";export{h as p4_dropdown}