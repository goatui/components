import{r as t,c as i,h as o,H as n,g as e}from"./p-29952b49.js";import{f as s}from"./p-1df439d8.js";let a=0;const r=class{constructor(o){t(this,o),this.p4Change=i(this,"p4:change",7),this.p4ActionClick=i(this,"p4:action-click",7),this.p4Input=i(this,"p4:input",7),this.id=++a,this.hasFocus=!1,this.isOpen=!1,this.searchString="",this.size="md",this.type="select",this.required=!1,this.disabled=!1,this.showLoader=!1,this.managed=!1,this.config={itemValue:"value",itemLabel:"label"},this.data=[],this.position="bottom-left",this.actions=[],this.clearInput=!1,this.name=`p4-select-${this.id}`,this.changeHandler=t=>{this.disabled||(this.value=this.getItemValue(t),this.p4Change.emit({value:this.value,item:t}))},this.blurHandler=()=>{this.hasFocus=!1},this.focusHandler=()=>{this.hasFocus=!0},this.closeList=()=>{!this.disabled&&this.isOpen&&(this.isOpen=!1,setTimeout((()=>this.setFocus()),100))},this.openList=()=>{this.disabled||this.isOpen||(this.isOpen=!0,"typeahead"===this.type&&(this.searchString="",setTimeout((()=>this.nativeInput.focus()),100)))},this.toggleList=()=>{this.isOpen?this.closeList():this.openList()},this.actionClickHandler=t=>{t.disabled||this.p4ActionClick.emit(t)},this.keyDownHandler=t=>{"Enter"===t.key?(t.preventDefault(),this.toggleList()):"ArrowDown"===t.key?this.isOpen&&(t.preventDefault(),this.listElement.setFocus()):"ArrowUp"===t.key&&this.isOpen&&(t.preventDefault(),this.listElement.setFocus(!0))},this.onInput=t=>{const i=t.target;i&&(this.searchString=i.value||""),this.p4Input.emit(t)}}async setFocus(){this.displayElement.focus()}async setOpen(t=!0){this.isOpen=t}windowClick(t){t.target.closest("p4-select")!==this.elm&&(this.isOpen=!1)}getItemValue(t){return t?t[this.config.itemValue]:null}getItemLabel(t){return t[this.config.itemLabel]}getActionIconSize(){return"lg"==this.size?"1.5rem":"sm"==this.size?"1rem":"1.25rem"}hasValue(){return(this.value||"").toString().length>0}getOptionLabelByValue(t){if(this.data){const i=this.data.find((i=>this.getItemValue(i)===t));return i?this.getItemLabel(i):this.placeholder}}render(){const t=`p4-select-${this.id}-lbl`,i=s(this.elm);i&&(i.id=t,i.setAttribute("required",this.required+""));const e=this.actions;return o(n,{"aria-disabled":this.disabled?"true":null,"has-value":this.hasValue(),focused:this.hasFocus,position:this.position},o("div",{class:{"select-container":!0,[this.position]:!0}},o("div",{class:{select:!0,input:!0,[`input-size-${this.size}`]:!0,[`input-type-${this.type}`]:!0,"input-has-actions":!!e.length,"input-disabled":this.disabled}},("select"===this.type||"typeahead"===this.type&&!this.isOpen)&&o("div",{class:"display-value",ref:t=>this.displayElement=t,tabindex:"0",onFocus:this.focusHandler,onBlur:this.blurHandler,onKeyDown:this.keyDownHandler,onClick:()=>this.toggleList()},this.getOptionLabelByValue(this.value)),"typeahead"===this.type&&this.isOpen&&o("input",{class:"native-input",ref:t=>this.nativeInput=t,type:"text","aria-labelledby":t,name:this.name,value:this.searchString,placeholder:this.placeholder,onBlur:this.blurHandler,onFocus:this.focusHandler,onInput:this.onInput,onKeyDown:this.keyDownHandler}),o("div",{class:"input-actions"},e.map((t=>o("button",{type:"button",class:{"action-button":!0,"action-button-disabled":t.disabled},"aria-disabled":t.disabled,onClick:()=>this.actionClickHandler(t)},o("p4-icon",{type:t.icon,class:"action-icon",size:this.getActionIconSize()})))),!this.showLoader&&this.getModeIcon())),this.isOpen&&this.renderDropdownList()))}getModeIcon(){return o("button",{class:"action-button mode-button",type:"button",onClick:t=>{t.preventDefault(),this.clearInput&&this.hasValue()?this.disabled||this.changeHandler():this.toggleList()}},o("p4-icon",{type:this.isOpen?"chevron-up":"chevron-down",size:this.getActionIconSize(),class:"action-icon mode-icon"}),o("p4-icon",{type:"x-circle-fill",size:this.getActionIconSize(),class:"action-icon clear-icon"}))}renderDropdownList(){if("string"!=typeof this.data){if(this.showLoader)return o("div",{class:"dropdown-result"},o("div",{class:"search-loader"},o("p4-spinner",{size:this.getActionIconSize()})," Loading..."));{const t=this.filterData();return o("div",{class:"dropdown-result"},o("p4-list",{ref:t=>this.listElement=t,data:t,value:this.value,"onP4:item-click":t=>{this.closeList(),this.changeHandler(t.detail.item)}}))}}}filterData(){return this.managed?this.data:this.data.filter((t=>!this.searchString||this.getItemLabel(t).toLocaleLowerCase().includes(this.searchString.toLocaleLowerCase())))}get elm(){return e(this)}};r.style="*{box-sizing:border-box}::selection{color:var(--color-shades-white);background:var(--color-primary-500)}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);border:0}.center-content{display:flex;align-items:center;justify-content:center}:host{display:block;padding-bottom:var(--space-3);--input-border-radius:var(--border-radius);--input-border-style:solid}.input{position:relative;display:flex;box-sizing:border-box;background-color:var(--color-shades-white);border:1px var(--input-border-style) var(--border-color);border-radius:var(--input-border-radius);overflow:hidden;cursor:text;align-items:stretch;justify-content:center;}.input .native-input,.input .display-value{flex:1;border:none;outline:none;background:none;padding-left:var(--space-4);padding-right:var(--space-4);width:100%;cursor:inherit}.input .native-input::placeholder,.input .display-value::placeholder{color:var(--color-neutral-400)}.input .slot-container{display:flex;align-items:center;justify-content:center}.input .slot-container slot::slotted(*){padding-bottom:0 !important;margin-bottom:0 !important;color:var(--color-neutral-400)}.input .slot-container slot::slotted(*) p4-icon{--color:var(--color-neutral-400)}.input .slot-container.start{padding-left:var(--space-3_5)}.input .slot-container.end{padding-right:var(--space-3_5)}.input .input-actions{line-height:0;display:flex}.input .input-actions .action-button{position:relative;border:none;box-shadow:none;background:var(--color-neutral-100);padding:0 var(--space-3_5) 0 var(--space-3_5);margin:0;border-radius:0;line-height:0;border-left:1px solid var(--border-color);cursor:pointer}.input .input-actions .action-button .action-icon{padding-bottom:0;--color:var(--color-neutral-600)}.input .input-actions .action-button:not(.action-button-disabled):focus{outline:none;background:var(--color-neutral-300)}.input .input-actions .action-button:not(.action-button-disabled):focus .action-icon{--color:var(--color-neutral-800)}.input .input-actions .action-button:not(.action-button-disabled):active{background:var(--color-primary-500)}.input .input-actions .action-button:not(.action-button-disabled):active .action-icon{--color:var(--color-shades-white)}.input .input-actions .action-button.action-button-disabled{cursor:not-allowed}.input .input-actions .action-button.action-button-disabled .action-icon{--color:var(--color-neutral-300)}.input.start-slot-has-content .native-input,.input.start-slot-has-content .display-value{padding-left:var(--space-2)}.input.input-has-actions .native-input,.input.input-has-actions .display-value,.input.end-slot-has-content .native-input,.input.end-slot-has-content .display-value{padding-right:var(--space-2)}.input:not(.start-slot-has-content) .slot-container.start{display:none}.input:not(.end-slot-has-content) .slot-container.end{display:none}.input.input-size-lg .native-input,.input.input-size-lg .display-value{height:3.25rem;font-family:var(--font-family-paragraph);font-size:var(--font-size-p2);line-height:var(--line-height-p2);font-weight:normal;padding-top:var(--space-3_5);padding-bottom:var(--space-3_5)}.input.input-size-md .native-input,.input.input-size-md .display-value{height:var(--space-11);font-family:var(--font-family-paragraph);font-size:var(--font-size-p1);line-height:var(--line-height-p1);font-weight:normal;padding-top:var(--space-3);padding-bottom:var(--space-3)}.input.input-size-sm .native-input,.input.input-size-sm .display-value{height:var(--space-9);font-family:var(--font-family-paragraph);font-size:var(--font-size-p1);line-height:var(--line-height-p1);font-weight:normal;padding-top:var(--space-2_5);padding-bottom:var(--space-2_5)}.input.input-disabled{background-color:var(--color-neutral-100);cursor:not-allowed;opacity:1}.input.input-disabled .native-input,.input.input-disabled .display-value{color:var(--color-neutral-400)}:host([focused]) .input:not(.input-disabled){border-color:var(--color-primary-500);outline:none;box-shadow:0 0 0 0.25rem rgba(3, 155, 229, 0.25)}:host([focused]):host(.success) .input:not(.input-disabled){box-shadow:0 0 0 0.25rem rgba(16, 185, 129, 0.25)}:host([focused]):host(.error) .input:not(.input-disabled){box-shadow:0 0 0 0.25rem rgba(239, 68, 68, 0.25)}:host(.success) .input:not(.input-disabled){border-color:var(--color-success-500)}:host(.error) .input:not(.input-disabled){border-color:var(--color-error-500)}.select-container{position:relative}.select-container .display-value{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;cursor:pointer}.select-container .select-options{position:absolute;width:max-content;line-height:0;top:calc(100% + var(--space-1));left:0;z-index:1000}.select-container .dropdown-result{position:absolute;width:max-content;line-height:0;z-index:1000}.select-container .input .input-actions .action-button.mode-button .clear-icon{--color:var(--color-error-700);display:none}.select-container.bottom-left .dropdown-result{top:calc(100% + var(--space-1));left:0}.select-container.bottom-right .dropdown-result{top:calc(100% + var(--space-1));right:0}.select-container.top-left .dropdown-result{bottom:calc(100% + var(--space-1));left:0}.select-container.top-right .dropdown-result{bottom:calc(100% + var(--space-1));right:0}.select-container .search-loader{display:flex;align-items:center}:host([clear-input][has-value]) .input .input-actions .action-button.mode-button:hover .mode-icon,:host([clear-input][has-value]) .input .input-actions .action-button.mode-button:focus .mode-icon{display:none}:host([clear-input][has-value]) .input .input-actions .action-button.mode-button:hover .clear-icon,:host([clear-input][has-value]) .input .input-actions .action-button.mode-button:focus .clear-icon{display:block !important}";export{r as p4_select}