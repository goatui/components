{"file":"goat-code-highlighter.entry.esm.js","mappings":"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","names":[],"sources":["./src/3d-party/prism/index.tsx","./src/components/content/code-highlighter/code-highlighter.scss?tag=goat-code-highlighter&encapsulation=shadow","./src/components/content/code-highlighter/code-highlighter.tsx"],"sourcesContent":["import { loadScript } from '../../utils/utils';\r\n\r\nexport default async function loadPrism() {\r\n  const version = '1.27.0';\r\n  // @ts-ignore\r\n  await loadScript(`https://cdnjs.cloudflare.com/ajax/libs/prism/${version}/components/prism-core.min.js`);\r\n  await loadScript(`https://cdnjs.cloudflare.com/ajax/libs/prism/${version}/plugins/autoloader/prism-autoloader.min.js`);\r\n}\r\n","@import \"../../../3d-party/prism/prism\";\r\n@import \"../../../3d-party/prism/prism-line-numbers\";\r\n@import \"../../../globalStyles/commons\";\r\n\r\n\r\n:host {\r\n  display: block;\r\n  height: 100%;\r\n}\r\n\r\n.code-loader {\r\n  height: 20rem;\r\n  background-color: v(--field-01);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: v(--spacing-2);\r\n}\r\n\r\n.code-highlighter {\r\n  position: relative;\r\n  height: 100%;\r\n  background-color: v(--color-brand-primary-10);\r\n  padding: v(--spacing-3);\r\n  color: v(--text-primary);\r\n\r\n  .scroll-wrapper {\r\n    height: 100%;\r\n    overflow-y: auto;\r\n    .line-numbers-wrapper {\r\n      height: 100%;\r\n      position: relative;\r\n\r\n      &.line-numbers {\r\n        margin-left: 3.8rem;\r\n      }\r\n\r\n      @include font-style(text-sm);\r\n      .highlighter {\r\n        margin: 0;\r\n        padding: 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  .copy-btn {\r\n    position: absolute;\r\n    top: v(--spacing-3);\r\n    right: v(--spacing-3);\r\n  }\r\n\r\n}\r\n\r\n\r\n:host-context([data-theme=\"dark\"]) .code-highlighter {\r\n  background-color: v(--color-brand-primary-100);\r\n}\r\n","import { Component, ComponentInterface, Element, h, Host, Prop, State, Watch } from '@stencil/core';\nimport loadPrism from '../../../3d-party/prism';\n\n\n/**\n * @name Code Highlighter\n * @description A browser based code highlighter.\n * @img /assets/img/code-highlighter.png\n */\n@Component({\n  tag: 'goat-code-highlighter',\n  styleUrl: 'code-highlighter.scss',\n  shadow: true,\n})\nexport class CodeHighlighter implements ComponentInterface {\n\n\n  @Prop() language: 'markup' | 'css' | 'clike' | 'javascript' | 'abap' | 'actionscript' | 'ada' | 'apacheconf' | 'apl' | 'applescript' | 'arduino' | 'arff' | 'asciidoc' | 'asm6502' | 'aspnet' | 'autohotkey' | 'autoit' | 'bash' | 'basic' | 'batch' | 'bison' | 'brainfuck' | 'bro' | 'c' | 'csharp' | 'cpp' | 'coffeescript' | 'clojure' | 'crystal' | 'csp' | 'css-extras' | 'd' | 'dart' | 'diff' | 'django' | 'docker' | 'eiffel' | 'elixir' | 'elm' | 'erb' | 'erlang' | 'fsharp' | 'flow' | 'fortran' | 'gedcom' | 'gherkin' | 'git' | 'glsl' | 'gml' | 'go' | 'graphql' | 'groovy' | 'haml' | 'handlebars' | 'haskell' | 'haxe' | 'http' | 'hpkp' | 'hsts' | 'ichigojam' | 'icon' | 'inform7' | 'ini' | 'io' | 'j' | 'java' | 'jolie' | 'json' | 'julia' | 'keyman' | 'kotlin' | 'latex' | 'less' | 'liquid' | 'lisp' | 'livescript' | 'lolcode' | 'lua' | 'makefile' | 'markdown' | 'markup-templating' | 'matlab' | 'mel' | 'mizar' | 'monkey' | 'n4js' | 'nasm' | 'nginx' | 'nim' | 'nix' | 'nsis' | 'objectivec' | 'ocaml' | 'opencl' | 'oz' | 'parigp' | 'parser' | 'pascal' | 'perl' | 'php' | 'php-extras' | 'plsql' | 'powershell' | 'processing' | 'prolog' | 'properties' | 'protobuf' | 'pug' | 'puppet' | 'pure' | 'python' | 'q' | 'qore' | 'r' | 'jsx' | 'tsx' | 'renpy' | 'reason' | 'rest' | 'rip' | 'roboconf' | 'ruby' | 'rust' | 'sas' | 'sass' | 'scss' | 'scala' | 'scheme' | 'smalltalk' | 'smarty' | 'sql' | 'soy' | 'stylus' | 'swift' | 'tap' | 'tcl' | 'textile' | 'tt2' | 'twig' | 'typescript' | 'vbnet' | 'velocity' | 'verilog' | 'vhdl' | 'vim' | 'visual-basic' | 'wasm' | 'wiki' | 'xeora' | 'xojo' | 'xquery' | 'yaml' = 'javascript';\n\n  @Prop() lineNumbers: boolean = false;\n\n  @Prop() value: string = '';\n\n  @State() compiledCode: string = '';\n\n  private parsedValue: string = '';\n\n  @Watch('language')\n  languageWatcher() {\n    this.renderPrism();\n  }\n\n  @Watch('lineNumbers')\n  themeWatcher() {\n    this.renderPrism();\n  }\n\n\n  @Element() elm!: HTMLElement;\n\n  async componentWillLoad() {\n    if (!window['Prism']) {\n      await loadPrism();\n      // @ts-ignore\n      const Prism = window['Prism'];\n      Prism.manual = true;\n\n    }\n  }\n\n  componentDidLoad() {\n    setTimeout(() => this.renderPrism(), 1000);\n  }\n\n  decode(str: string) {\n    return str.replace(/&lt;/g, '<').replace(/&gt;/g, '>');\n  }\n\n  private renderPrism() {\n    // @ts-ignore\n    const Prism = window['Prism'];\n\n    let value = this.value;\n    if (!value) {\n      value = this.elm.innerHTML;\n    }\n    value = this.decode(value);\n    this.parsedValue = value.trim();\n    const formatted = Prism.highlight(this.parsedValue, Prism.languages[this.language], this.language);\n    let lineNumbersWrapper = '';\n    if (this.lineNumbers) {\n      const linesNum = formatted.split('\\n').length;\n      const lines = new Array(linesNum + 1).join('<span></span>');\n      lineNumbersWrapper = `<span aria-hidden='true' class='line-numbers-rows'>${lines}</span>`;\n    }\n    this.compiledCode = formatted + lineNumbersWrapper;\n  }\n\n  handleCopyClick() {\n    window.navigator.clipboard.writeText(this.parsedValue);\n    alert('copied');\n  }\n\n  render() {\n    return (\n      <Host>\n        {this.compiledCode && <div class='code-highlighter'>\n          <div class='scroll-wrapper'>\n            <div class={{ 'line-numbers-wrapper': true, 'line-numbers': this.lineNumbers }}>\n              <pre dir='ltr' class='highlighter line-numbers' innerHTML={this.compiledCode} />\n            </div>\n          </div>\n          <goat-button class='copy-btn color-secondary' size='sm' variant='ghost' icon='files' aria-label='Copy code'\n                       title='Copy code' onGoat:click={() => {\n            this.handleCopyClick();\n          }} />\n        </div>}\n        {!this.compiledCode && <div class='code-loader'>\n          <goat-spinner class='rainbow' />\n          Loading code...\n        </div>}\n      </Host>\n    );\n  }\n\n}\n"],"version":3}