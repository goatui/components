import{r as t,h as i,H as s,g as e}from"./p-6592004b.js";const r="*{box-sizing:border-box}:host{font-family:var(--font-family-base)}::selection{color:var(--color-white, white);background:var(--color-primary, #0f62fe)}::-webkit-scrollbar{width:var(--scrollbar-width, 0.75rem);height:var(--scrollbar-width, 0.75rem)}::-webkit-scrollbar-track{background:#f1f1f1}::-webkit-scrollbar-thumb{background:#888}::-webkit-scrollbar-thumb :hover{background:#555}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);border:0}.center-content{display:flex;align-items:center;justify-content:center}:host([hidden]){display:none}@keyframes reveal{0%{opacity:0;transform:translateY(8px)}}:host{display:block}.canvas-wrapper{background:var(--layer-hover-01)}#canvas-background circle{fill:var(--border-disabled)}#endarrow polyline{fill:none;stroke:#231F20;vector-effect:non-scaling-stroke;stroke-width:2}.line.no-color{stroke:var(--border-strong-01, #8d8d8d)}.clickable{cursor:pointer;z-index:1}.clickable:hover .line{stroke:var(--color-primary, #0f62fe)}";const h=class{constructor(i){t(this,i);this.drawingArea={minX:0,minY:0,maxX:0,maxY:0};this.unitSize=1;this.dotRadius=this.unitSize;this.gap=this.unitSize*10;this.getNextPoint=(t,i,s)=>{const e={};if(i=="down"){e.x=t.x;e.y=t.y+s}else if(i=="up"){e.x=t.x;e.y=t.y-s}else if(i=="left"){e.x=t.x-s;e.y=t.y}else if(i=="right"){e.x=t.x+s;e.y=t.y}return e};this.shapes=[];this.padding=1;this.zoom=1;this.viewbox=undefined}componentDidLoad(){setTimeout((()=>{this.renderCanvas()}))}renderCanvas(){}updateDrawingArea(t){if(t.x>this.drawingArea.maxX){this.drawingArea.maxX=t.x}if(t.y>this.drawingArea.maxY){this.drawingArea.maxY=t.y}if(t.x<this.drawingArea.minX){this.drawingArea.minX=t.x}if(t.y<this.drawingArea.minY){this.drawingArea.minY=t.y}}renderShapes(t){const s=this.unitSize;const e=this.shapes.map((e=>{switch(e.type){case"circle":{if(e.x+Math.ceil(e.radius)>t.width){t.width=e.x+Math.ceil(e.radius)}if(e.x-Math.ceil(e.radius)<t.x){t.x=e.x-Math.ceil(e.radius)}if(e.y+Math.ceil(e.radius)>t.height){t.height=e.y+Math.ceil(e.radius)}if(e.y-Math.ceil(e.radius)<t.y){t.y=e.y-Math.ceil(e.radius)}return i("circle",{cx:e.x*this.gap+s,cy:e.y*this.gap+s,r:e.radius*this.gap,fill:e.color||"black"})}case"rect":{if(e.x+Math.ceil(e.width)>t.width){t.width=e.x+Math.ceil(e.width)}if(e.x-Math.ceil(e.width)<t.x){t.x=e.x-Math.ceil(e.width)}if(e.y+Math.ceil(e.height)>t.height){t.height=e.y+Math.ceil(e.height)}if(e.y-Math.ceil(e.height)<t.y){t.y=e.y-Math.ceil(e.height)}return i("rect",{x:e.x*this.gap+s,y:e.y*this.gap,width:e.width*this.gap+s,height:e.height*this.gap+s,fill:e.color||"black"})}case"line":{const t=`M${e.start.x*this.gap+this.dotRadius} ${e.start.y*this.gap+this.dotRadius} L${e.end.x*this.gap+this.dotRadius} ${e.end.y*this.gap+this.dotRadius}`;return i("path",{class:"line clickable","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",stroke:"#000",d:t,fill:"none"})}case"connector":{let s=`M${e.start.x*this.gap+this.dotRadius} ${e.start.y*this.gap+this.dotRadius}`;let r=Object.assign({},e.start);this.updateComputationArea(r,t);for(let i=0;i<e.path.length;i++){const h=e.path[i];let a={};if(i==0){a=this.getNextPoint(r,h.direction,1);s+=` L${a.x*this.gap+this.dotRadius} ${a.y*this.gap+this.dotRadius}`;r=Object.assign({},a);this.updateComputationArea(r,t)}a=this.getNextPoint(r,h.direction,h.length-2);s+=` L${a.x*this.gap+this.dotRadius} ${a.y*this.gap+this.dotRadius}`;r=Object.assign({},a);this.updateComputationArea(r,t);if(i==e.path.length-1){a=this.getNextPoint(r,h.direction,1);s+=` L${a.x*this.gap+this.dotRadius} ${a.y*this.gap+this.dotRadius}`;r=Object.assign({},a);this.updateComputationArea(r,t)}else{const a=e.path[i+1];const n=this.getNextPoint(r,h.direction,1);const o=this.getNextPoint(n,a.direction,1);s+=` Q ${n.x*this.gap+this.dotRadius} ${n.y*this.gap+this.dotRadius} ${o.x*this.gap+this.dotRadius} ${o.y*this.gap+this.dotRadius}`;r=Object.assign({},o);this.updateComputationArea(r,t)}}return i("g",{class:"clickable"},i("path",{class:{line:true,"no-color":!e.color},"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",stroke:e.color||"#000","marker-end":e.showArrow?"url(#endarrow)":"",d:s,"stroke-dasharray":e.dashed?"6,6":null,fill:"none"}),i("path",{"stroke-width":"10","stroke-linecap":"round","stroke-linejoin":"round",stroke:"transparent",d:s,fill:"none"}))}}}));t.x=t.x-this.padding;t.y=t.y-this.padding;t.width=t.width+this.padding;t.height=t.height+this.padding;t.width=t.width-t.x;t.height=t.height-t.y;return e}updateComputationArea(t,i){if(t.x>i.width){i.width=t.x}else if(t.x<i.x){i.x=t.x}if(t.y>i.height){i.height=t.y}else if(t.y<i.y){i.y=t.y}}render(){const t=this.unitSize;let e={width:0,height:0,x:0,y:0};const r=this.renderShapes(e);if(this.viewbox){const t=this.viewbox.split(" ");e={x:parseInt(t[0],10),y:parseInt(t[1],10),width:parseInt(t[2],10),height:parseInt(t[3],10)}}return i(s,null,i("div",{class:"canvas-wrapper",style:{width:(e.width*this.gap+2)*t*this.zoom+"px",height:(e.height*this.gap+2)*t*this.zoom+"px"}},i("svg",{class:"canvas",height:"100%",width:"100%",viewBox:`${e.x*this.gap} ${e.y*this.gap} ${e.width*this.gap+2*t} ${e.height*this.gap+2*t}`},i("defs",null,i("pattern",{id:"canvas-background",patternUnits:"userSpaceOnUse",width:this.gap,height:this.gap},i("circle",{cx:1,cy:1,r:this.dotRadius})),i("marker",{id:"endarrow",markerWidth:"15",markerHeight:"22.5",refX:"9",refY:"15",markerUnits:"userSpaceOnUse",orient:"auto"},i("polyline",{points:"0 22.5, 7.5 15, 0 7.5"}))),i("rect",{x:e.x*this.gap,y:e.y*this.gap,width:"100%",height:"100%",fill:"url(#canvas-background)"}),r)))}get elm(){return e(this)}};h.style=r;export{h as goat_canvas};
//# sourceMappingURL=p-496d5cff.entry.js.map