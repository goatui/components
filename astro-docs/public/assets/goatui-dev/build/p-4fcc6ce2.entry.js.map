{"version":3,"names":["tableCss","DEFAULT_CELL_WIDTH","SUPPORTED_PAGE_SIZES","value","label","Table","this","onSelectAllClick","selectedRowKeys","isSelectAll","data","map","row","keyField","slice","page","pageSize","onSelectChange","onRowSelectClick","includes","filter","rowId","push","onCellMouseOver","column","hoveredCell","title","description","goatSelectChange","emit","onCellClick","col","evt","goatCellClick","record","altKey","ctrlKey","metaKey","shiftKey","renderHeader","fixedCols","scrollCols","selectionType","h","class","intermediate","isSelectAllIntermediate","columns","forEach","colWidth","width","parseInt","colEl","sort","sortBy","name","style","sortable","icon","sortOrder","variant","onClick","goatSort","fixed","renderBody","rows","managed","a","b","paginate","center","tabindex","onMouseOver","onKeyDown","event","key","elem","target","window","navigator","clipboard","writeText","innerText","selection","getSelection","type","template","innerHTML","getTotalItems","totalItems","length","renderPagination","inline","items","positions","e","detail","goatPage","disabled","render","Host","table","isHorizontallyScrolled","onScroll","scrollLeft","renderEmptyState","Object","assign","emptyState"],"sources":["src/components/data-display/table/table.scss?tag=goat-table&encapsulation=shadow","src/components/data-display/table/table.tsx"],"sourcesContent":["@import \"../../../globalStyles/commons\";\r\n\r\n:host {\r\n  display: block;\r\n  height: 100%;\r\n  min-height: 20em;\r\n  --table-border-color: #{v(--border-strong-01)};\r\n  --table-border: 1px solid var(--table-border-color);\r\n  --table-col-content-padding: #{v(--spacing-02)} #{v(--spacing-03)};\r\n}\r\n\r\n.table {\r\n  height: 100%;\r\n  border-inline-start: var(--table-border-inline-start, var(--table-border));\r\n  border-inline-end: var(--table-border-inline-end, var(--table-border));\r\n  border-top: var(--table-border-top, var(--table-border));\r\n  border-bottom: var(--table-border-bottom, var(--table-border));\r\n\r\n  @include font-style(text-md);\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  .table-scroll-container {\r\n    position: relative;\r\n    overflow: auto;\r\n    height: 100%;\r\n  }\r\n\r\n  .empty-table {\r\n    height: 80%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n\r\n  .pagination {\r\n    display: flex;\r\n    border-top: 1px solid var(--table-border-color);\r\n\r\n    .form-control {\r\n      margin: 0;\r\n    }\r\n    .select {\r\n      margin: 0;\r\n      --input-border-radius: none;\r\n      --input-border-style: none;\r\n      border-left: 1px solid var(--table-border-color);\r\n      border-right: 1px solid var(--table-border-color);\r\n    }\r\n\r\n    .page-sizes-select {\r\n      margin-inline-start: v(--spacing-03);\r\n    }\r\n\r\n    .pagination-item-count {\r\n      margin-inline-start: v(--spacing-04);\r\n      flex: 1;\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n\r\n    .arrows {\r\n      --border-radius: 0;\r\n      --button-height: calc(2.5rem - 2px);\r\n    }\r\n  }\r\n\r\n  &.horizontal-scrolled {\r\n    .fixed-columns:after {\r\n      box-shadow: 10px 0 20px -20px var(--border-color) inset;\r\n      content: \" \";\r\n      height: 100%;\r\n      position: absolute;\r\n      top: 0;\r\n      right: -20px;\r\n      width: 20px;\r\n    }\r\n  }\r\n}\r\n\r\n\r\n.row {\r\n  display: flex;\r\n  box-sizing: border-box;\r\n\r\n\r\n  .columns-container {\r\n    display: flex;\r\n  }\r\n\r\n  .col {\r\n    margin: 0;\r\n    color: v(--text-primary);\r\n\r\n    .col-content {\r\n      display: flex;\r\n      align-items: center;\r\n      height: 100%;\r\n\r\n      .col-text {\r\n        padding: var(--table-col-content-padding);\r\n        flex: 1;\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n        text-overflow: ellipsis;\r\n      }\r\n\r\n      .col-template {\r\n        width: 100%;\r\n      }\r\n\r\n      .col-action {\r\n        --button-border-radius: none;\r\n\r\n        &.has-focus {\r\n          z-index: 12;\r\n        }\r\n      }\r\n\r\n      .checkbox {\r\n        padding: 0 v(--spacing-03);\r\n      }\r\n    }\r\n\r\n    &.center .col-content {\r\n      justify-content: center;\r\n    }\r\n\r\n    &:last-child {\r\n      flex: 1;\r\n    }\r\n  }\r\n\r\n  .fixed-columns {\r\n    position: sticky;\r\n    left: 0;\r\n    z-index: 1;\r\n  }\r\n\r\n  .scrollable-columns {\r\n    flex: 1;\r\n    /*z-index: 0;*/\r\n  }\r\n\r\n}\r\n\r\n.header {\r\n  z-index: v(--z-index-table-header);\r\n  font-weight: v(--font-weight-semi-bold);\r\n  text-transform: uppercase;\r\n  position: sticky;\r\n  top: 0;\r\n  background: v(--layer-01);\r\n\r\n\r\n  .left-panel {\r\n    position: sticky;\r\n    top: 0;\r\n    left: 0;\r\n  }\r\n\r\n  .col {\r\n    background: v(--layer-01);\r\n    border-bottom: 1px solid var(--table-border-color);\r\n\r\n    &.sort {\r\n      background: v(--active-ui);\r\n    }\r\n  }\r\n}\r\n\r\n.body {\r\n\r\n  .row {\r\n    &:hover {\r\n      background-color: v(--hover-ui);\r\n\r\n      .col {\r\n        background-color: v(--hover-ui);\r\n      }\r\n    }\r\n\r\n    .col {\r\n      cursor: pointer;\r\n      background: v(--background);\r\n      border-bottom: 1px solid var(--layer-accent-01);\r\n\r\n      &.col-checkbox .col-content {\r\n        border: 0;\r\n      }\r\n\r\n      .col-content {\r\n        border: 2px solid transparent;\r\n        border-bottom: 1px solid transparent;\r\n      }\r\n\r\n\r\n      &:focus {\r\n        outline: none;\r\n        border-bottom-color: v(--color-primary);\r\n        z-index: 1;\r\n        .col-content {\r\n          border-color: v(--color-primary);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .left-panel {\r\n    position: sticky;\r\n    left: 0;\r\n  }\r\n\r\n}\r\n\r\n:host(.show-full-content) .body .col-text {\r\n  overflow: initial;\r\n  white-space: initial;\r\n  text-overflow: initial;\r\n}\r\n\r\n:host-context([data-theme=dark]) {\r\n\r\n}\r\n\r\n.empty-data {\r\n  text-align: center;\r\n  position: absolute;\r\n  margin: auto;\r\n  top: 46px;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  border-radius: 3px;\r\n  height: max-content;\r\n  color: v(--color-neutral-600);\r\n}\r\n","import { Component, Element, Event, EventEmitter, h, Host, Prop, State } from '@stencil/core';\r\n\r\nconst DEFAULT_CELL_WIDTH = 16; // in rem\r\nconst SUPPORTED_PAGE_SIZES = [\r\n  {\r\n    value: 10,\r\n    label: 10,\r\n  },\r\n  {\r\n    value: 25,\r\n    label: 25,\r\n  },\r\n  {\r\n    value: 50,\r\n    label: 50,\r\n  },\r\n  {\r\n    value: 100,\r\n    label: 100,\r\n  },\r\n];\r\n\r\n/**\r\n * @name Table\r\n * @description A configurable component for displaying tabular data.\r\n * @category Data Display\r\n * @img /assets/img/table.png\r\n * @imgDark /assets/img/table-dark.png\r\n */\r\n@Component({\r\n  tag: 'goat-table',\r\n  styleUrl: 'table.scss',\r\n  shadow: true,\r\n})\r\nexport class Table {\r\n  @Element() elm!: HTMLElement;\r\n\r\n  /**\r\n   * Grid columns configuration.\r\n   * [\r\n   * {\r\n   *   \"name\":\"name\",\r\n   *   \"label\":\"Name\",\r\n   *   \"width\":300,\r\n   *   \"fixed\":true,\r\n   *   \"template\": function(row, column) { return row[column.name];}\r\n   *  },\r\n   * {\r\n   *   \"name\":\"age\",\r\n   *   \"label\":\"Age\"\r\n   * }\r\n   * ]\r\n   */\r\n  @Prop() columns: any[] = [];\r\n\r\n  /**\r\n   * Grid data to display on table\r\n   * [{\r\n   *  'id': '5e7118ddce4b3d577956457f',\r\n   *  'age': 21,\r\n   *  'name': 'John',\r\n   *  'company': 'India',\r\n   *  'email': 'john@example.com',\r\n   *  'phone': '+1 (839) 560-3581',\r\n   *  'address': '326 Irving Street, Grimsley, Texas, 4048'\r\n   *  }]\r\n   */\r\n  @Prop() data: any[] = [];\r\n\r\n  @Prop() selectionType: 'checkbox' | undefined;\r\n\r\n  @Prop({ mutable: true }) selectedRowKeys: string[] = [];\r\n\r\n  @Prop() keyField: string = 'id';\r\n\r\n  @Prop() managed: boolean = false;\r\n\r\n  @Prop() sortable: boolean = true;\r\n\r\n  @Prop({ mutable: true }) sortBy: string;\r\n\r\n  @Prop({ mutable: true }) sortOrder: 'asc' | 'desc' = 'asc';\r\n\r\n  @Prop() paginate: boolean = true;\r\n\r\n  @Prop() page: number = 1;\r\n\r\n  @Prop() pageSize: number = 10;\r\n\r\n  @Prop({ mutable: true }) totalItems;\r\n\r\n  @Prop({ mutable: true }) emptyState: any = {\r\n    title: 'No items',\r\n    description: 'There are no items to display',\r\n  };\r\n\r\n  @State() private hoveredCell: any = {};\r\n  @State() private isSelectAll: boolean = false;\r\n  @State() private isSelectAllIntermediate: boolean = false;\r\n  @State() private isHorizontallyScrolled: boolean = false;\r\n\r\n  @Event({ eventName: 'goat:table-cell-click' }) goatCellClick: EventEmitter;\r\n  @Event({ eventName: 'goat:table-select-change' }) goatSelectChange: EventEmitter;\r\n  @Event({ eventName: 'goat:sort' }) goatSort: EventEmitter;\r\n  @Event({ eventName: 'goat:page' }) goatPage: EventEmitter;\r\n\r\n  onSelectAllClick = () => {\r\n    let selectedRowKeys = [];\r\n    this.isSelectAll = !this.isSelectAll;\r\n    if (this.isSelectAll) selectedRowKeys = this.data.map(row => row[this.keyField]).slice((this.page - 1) * this.pageSize, this.page * this.pageSize);\r\n    this.onSelectChange(selectedRowKeys);\r\n  };\r\n\r\n  onRowSelectClick = row => {\r\n    let selectedRowKeys = [...this.selectedRowKeys];\r\n    if (selectedRowKeys.includes(row[this.keyField])) {\r\n      this.isSelectAll = false;\r\n      selectedRowKeys = selectedRowKeys.filter(rowId => rowId !== row[this.keyField]);\r\n    } else {\r\n      selectedRowKeys.push(row[this.keyField]);\r\n    }\r\n    this.onSelectChange(selectedRowKeys);\r\n  };\r\n\r\n  onCellMouseOver = (row: any, column: any) => {\r\n    this.hoveredCell = { row, column };\r\n  };\r\n\r\n  onSelectChange(selectedRowKeys: any) {\r\n    this.selectedRowKeys = selectedRowKeys;\r\n    this.goatSelectChange.emit({ value: this.selectedRowKeys, isSelectAll: this.isSelectAll });\r\n  }\r\n\r\n  onCellClick(row: any, col: any, evt: MouseEvent) {\r\n    this.goatCellClick.emit({\r\n      record: row,\r\n      column: col,\r\n      altKey: evt.altKey,\r\n      ctrlKey: evt.ctrlKey,\r\n      metaKey: evt.metaKey,\r\n      shiftKey: evt.shiftKey,\r\n    });\r\n  }\r\n\r\n  renderHeader() {\r\n    const fixedCols = [];\r\n    const scrollCols = [];\r\n\r\n    if (this.selectionType === 'checkbox') {\r\n      fixedCols.push(\r\n        <div class=\"col col-checkbox center\">\r\n          <div class=\"col-content\">\r\n            <goat-checkbox class=\"checkbox light\" value={this.isSelectAll} intermediate={this.isSelectAllIntermediate} onGoat:change={this.onSelectAllClick} />\r\n          </div>\r\n        </div>,\r\n      );\r\n    }\r\n    this.columns.forEach(col => {\r\n      let colWidth = DEFAULT_CELL_WIDTH;\r\n      if (col.width) colWidth = parseInt(col.width);\r\n      const colEl = (\r\n        <div class={{ col: true, sort: this.sortBy === col.name }} style={{ width: colWidth + 'rem' }}>\r\n          <div class=\"col-content\">\r\n            <div class=\"col-text\">{col.label}</div>\r\n            <div class=\"col-actions\">\r\n              {(() => {\r\n                if (!this.sortable) return;\r\n                let icon = 'arrows--vertical';\r\n                if (this.sortBy === col.name) {\r\n                  if (this.sortOrder === 'asc') icon = 'arrow--up';\r\n                  else icon = 'arrow--down';\r\n                }\r\n                return (\r\n                  <goat-button\r\n                    icon={icon}\r\n                    class=\"col-action color-secondary\"\r\n                    variant=\"ghost\"\r\n                    onClick={() => {\r\n                      if (this.sortBy === col.name) {\r\n                        if (this.sortOrder === 'asc') this.sortOrder = 'desc';\r\n                        else this.sortBy = null;\r\n                      } else {\r\n                        this.sortBy = col.name;\r\n                        this.sortOrder = 'asc';\r\n                      }\r\n                      this.goatSort.emit({ sortBy: this.sortBy, sortOrder: this.sortOrder });\r\n                    }}\r\n                  />\r\n                );\r\n              })()}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n      col.fixed ? fixedCols.push(colEl) : scrollCols.push(colEl);\r\n    });\r\n\r\n    return (\r\n      <div class=\"header\">\r\n        <div class=\"row\">\r\n          <div class=\"fixed-columns columns-container\">{fixedCols}</div>\r\n          <div class=\"scrollable-columns columns-container\">{scrollCols}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderBody() {\r\n    const rows = [];\r\n\r\n    let data = [...this.data];\r\n\r\n    if (!this.managed) {\r\n      if (this.sortable && this.sortBy) {\r\n        data = data.sort((a, b) => {\r\n          if (a[this.sortBy] < b[this.sortBy]) return this.sortOrder === 'asc' ? -1 : 1;\r\n          if (a[this.sortBy] > b[this.sortBy]) return this.sortOrder === 'asc' ? 1 : -1;\r\n          return 0;\r\n        });\r\n      }\r\n      if (this.paginate) {\r\n        data = data.slice((this.page - 1) * this.pageSize, this.page * this.pageSize);\r\n      }\r\n    }\r\n\r\n    data.forEach(row => {\r\n      const fixedCols = [];\r\n      const scrollCols = [];\r\n\r\n      if (this.selectionType === 'checkbox')\r\n        fixedCols.push(\r\n          <div class={{ 'col': true, 'center': true, 'col-checkbox': true }}>\r\n            <div class=\"col-content\">\r\n              <goat-checkbox class=\"checkbox light\" value={this.selectedRowKeys.includes(row[this.keyField])} onGoat:change={() => this.onRowSelectClick(row)} />\r\n            </div>\r\n          </div>,\r\n        );\r\n\r\n      this.columns.forEach(column => {\r\n        let colWidth = DEFAULT_CELL_WIDTH;\r\n        if (column.width) colWidth = parseInt(column.width);\r\n        const colEl = (\r\n          <div\r\n            tabindex=\"1\"\r\n            class={{ 'col': true, 'col-hover': this.hoveredCell.row === row && this.hoveredCell.column === column }}\r\n            style={{ width: colWidth + 'rem' }}\r\n            onMouseOver={() => this.onCellMouseOver(row, column)}\r\n            onKeyDown={event => {\r\n              if ((event.ctrlKey || event.metaKey) && event.key === 'c') {\r\n                const elem: any = event.target;\r\n                window.navigator.clipboard.writeText(elem.innerText);\r\n              }\r\n            }}\r\n            onClick={(evt: MouseEvent) => {\r\n              const selection = window.getSelection();\r\n              if (selection.type != 'Range') this.onCellClick(row, column, evt);\r\n            }}\r\n          >\r\n            <div class=\"col-content\">\r\n              {(() => {\r\n                if (column.template) return <div class=\"col-template\" innerHTML={column.template(row, column)}></div>;\r\n                else\r\n                  return (\r\n                    <div class=\"col-text\" title={row?.[column.name]}>\r\n                      {row?.[column.name]}\r\n                    </div>\r\n                  );\r\n              })()}\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n        column.fixed ? fixedCols.push(colEl) : scrollCols.push(colEl);\r\n      });\r\n      rows.push(\r\n        <div class={{ 'row': true, 'row-hover': this.hoveredCell.row === row }}>\r\n          <div class=\"fixed-columns columns-container\">{fixedCols}</div>\r\n          <div class=\"scrollable-columns columns-container\">{scrollCols}</div>\r\n        </div>,\r\n      );\r\n    });\r\n\r\n    return <div class=\"body\">{rows}</div>;\r\n  }\r\n\r\n  getTotalItems() {\r\n    let totalItems = this.totalItems;\r\n    if (this.paginate && !this.managed) totalItems = this.data.length;\r\n    return totalItems;\r\n  }\r\n\r\n  renderPagination() {\r\n    if (this.paginate)\r\n      return (\r\n        <div class=\"pagination\">\r\n          <div class=\"page-sizes-select\">\r\n            <goat-form-control label=\"Items per page:\" inline class=\"form-control\">\r\n              <goat-select\r\n                class=\"select\"\r\n                items={SUPPORTED_PAGE_SIZES}\r\n                positions=\"top-right\"\r\n                value={this.pageSize}\r\n                onGoat:change={e => {\r\n                  this.pageSize = e.detail.value;\r\n                  this.goatPage.emit({ page: this.page, pageSize: this.pageSize });\r\n                }}\r\n              />\r\n            </goat-form-control>\r\n          </div>\r\n          <div class=\"pagination-item-count\">\r\n            <goat-text inline>\r\n              {this.pageSize * (this.page - 1)} - {this.pageSize * this.page < this.getTotalItems() ? this.pageSize * this.page : this.getTotalItems()} of {this.getTotalItems()}{' '}\r\n              items\r\n            </goat-text>\r\n          </div>\r\n          <div class=\"pagination-right\">\r\n            <div class=\"table-footer-right-content\">\r\n              <div class=\"table-footer-right-content-pagination\">\r\n                <goat-button\r\n                  icon=\"arrow--left\"\r\n                  class=\"arrows\"\r\n                  variant=\"ghost\"\r\n                  disabled={this.page === 1}\r\n                  onClick={() => {\r\n                    this.page = this.page - 1;\r\n                    this.goatPage.emit({ page: this.page, pageSize: this.pageSize });\r\n                  }}\r\n                />\r\n                <goat-button\r\n                  icon=\"arrow--right\"\r\n                  variant=\"ghost\"\r\n                  class=\"arrows\"\r\n                  disabled={this.pageSize * this.page >= this.getTotalItems()}\r\n                  onClick={() => {\r\n                    this.page = this.page + 1;\r\n                    this.goatPage.emit({ page: this.page, pageSize: this.pageSize });\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Host>\r\n        <div\r\n          class={{\r\n            'table': true,\r\n            'sortable': this.sortable,\r\n            'paginate': this.paginate,\r\n            'horizontal-scrolled': this.isHorizontallyScrolled,\r\n          }}\r\n        >\r\n          <div\r\n            class=\"table-scroll-container\"\r\n            onScroll={event => {\r\n              // @ts-ignore\r\n              this.isHorizontallyScrolled = !!event.target.scrollLeft;\r\n            }}\r\n          >\r\n            {this.renderHeader()}\r\n            {this.data.length ? this.renderBody() : this.renderEmptyState()}\r\n          </div>\r\n          <div class=\"table-footer\">{this.renderPagination()}</div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n  private renderEmptyState() {\r\n    return (\r\n      <div class=\"empty-table\">\r\n        <goat-empty-state class=\"content-center\" {...this.emptyState} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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"}