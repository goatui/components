import{r as t,h as o,H as i,g as s}from"./p-6592004b.js";import{a as n,b as e,c as r}from"./p-96630149.js";const h="*{box-sizing:border-box}:host{font-family:var(--font-family-base)}::selection{color:var(--color-white, white);background:var(--color-primary, #0f62fe)}::-webkit-scrollbar{width:var(--scrollbar-width, 0.75rem);height:var(--scrollbar-width, 0.75rem)}::-webkit-scrollbar-track{background:#f1f1f1}::-webkit-scrollbar-thumb{background:#888}::-webkit-scrollbar-thumb :hover{background:#555}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);border:0}.center-content{display:flex;align-items:center;justify-content:center}:host([hidden]){display:none}@keyframes reveal{0%{opacity:0;transform:translateY(8px)}}:host{display:inline-block;height:var(--dropdown-height, auto)}.dropdown{position:relative;height:var(--dropdown-height, auto)}.dropdown .dropdown-button{border:none;background:none;padding:0;margin:0;height:100%;width:100%}.dropdown .dropdown-button .slot-container{height:100%}.dropdown .dropdown-content{z-index:var(--z-index-dropdown-content, 40);position:absolute;width:max-content;line-height:0;transform:scale(0);transition:transform 0.1s ease-out 0s}.dropdown.is-open .dropdown-content{transform:scale(1)}.dropdown.bottom-right .dropdown-content{top:calc(100% + var(--spacing-02, 0.25rem));left:0;transform-origin:top}.dropdown.bottom-left .dropdown-content{top:calc(100% + var(--spacing-02, 0.25rem));right:0;transform-origin:top}.dropdown.top-right .dropdown-content{bottom:calc(100% + var(--spacing-02, 0.25rem));left:0;transform-origin:bottom}.dropdown.top-left .dropdown-content{bottom:calc(100% + var(--spacing-02, 0.25rem));right:0;transform-origin:bottom}.dropdown.center .dropdown-content{top:0;left:0;position:fixed;transform-origin:center;display:flex;align-items:center;width:100vw;height:100vh;justify-content:center;background:rgba(0, 0, 0, 0.5);pointer-events:none}.dropdown .items{min-width:12rem}:host([has-focus]) .dropdown{outline:none}";const a=class{constructor(o){t(this,o);this.openList=()=>{if(!this.disabled&&!this.isOpen){this.isOpen=true;setTimeout((()=>{const t=this.elm.querySelector('[slot="dropdown-content"]');this.dropdownContentHeight=t.getBoundingClientRect().height;this.dropdownContentWidth=t.getBoundingClientRect().width;this.fixPosition()}),100)}};this.toggleList=()=>{if(this.isOpen)this.closeList();else this.openList()};this.blurHandler=()=>{this.hasFocus=false};this.focusHandler=()=>{this.hasFocus=true};this.keyDownHandler=t=>{const o=this.getMenuElement();if(t.key==="Enter"){t.preventDefault();this.toggleList()}else if(t.key==="ArrowDown"){if(this.isOpen){t.preventDefault();o===null||o===void 0?void 0:o.setFocus()}}else if(t.key==="ArrowUp"){if(this.isOpen){t.preventDefault();o===null||o===void 0?void 0:o.setFocus()}}};this.size="md";this.isOpen=false;this.disabled=false;this.positions="bottom-right,top-right,bottom-left,top-left";this.items=null;this.hasFocus=false;this.position=undefined}windowClick(t){const o=t.path||t.composedPath();for(const t of o){if(t==this.elm)return}this.isOpen=false}async setFocus(t){const o=t.children[0]||this.elm.children[0];if(o.setFocus)o.setFocus()}listenMenuItemClick(t){if(n(t,this.elm)){this.closeList()}this.isOpen=false}listenClick(t){if(n(t,this.elm)){this.closeList()}this.isOpen=false}listenKeyDown(t){if(n(t,this.elm)){if(t.key==="Escape"){this.closeList()}}}closeList(){if(!this.disabled&&this.isOpen){this.isOpen=false;setTimeout((()=>{this.setFocus(this.elm)}),100)}}componentWillLoad(){if(this.positions)this.position=this.positions.split(",")[0]}fixPosition(){if(this.isOpen&&this.dropdownContentHeight&&this.dropdownContentWidth){if(e()){this.position="center";return}const t=this.positions.split(",");for(let o=0;o<t.length;o++){const i=this.elm.getBoundingClientRect();const s={};if(t[o]==="bottom-right"){s.top=i.top+i.height;s.bottom=s.top+this.dropdownContentHeight;s.left=i.left;s.right=i.left+this.dropdownContentWidth}else if(t[o]==="top-right"){s.top=i.top-this.dropdownContentHeight;s.bottom=i.top;s.left=i.left;s.right=i.left+this.dropdownContentWidth}else if(t[o]==="bottom-left"){s.top=i.top+i.height;s.bottom=s.top+this.dropdownContentHeight;s.left=i.left-this.dropdownContentWidth;s.right=i.left}else if(t[o]==="top-left"){s.top=i.top-this.dropdownContentHeight;s.bottom=i.top;s.left=i.left-this.dropdownContentWidth;s.right=i.left}const n=r(s);if(!n.any){this.position=t[o];break}}}}getMenuElement(){return this.elm.querySelector("goat-menu")}renderItems(){if(this.items)return o("goat-menu",{class:"items",size:this.size},this.items.map((t=>o("goat-menu-item",{value:t.value,tabindex:this.isOpen?"0":"-1"},t.icon&&o("goat-icon",{name:t.icon,slot:"start",size:"sm"}),t.label,t.hint&&o("span",{slot:"end"},t.hint)))))}render(){return o(i,{"has-focus":this.hasFocus,"is-open":this.isOpen},o("div",{class:{dropdown:true,[this.position]:true,"is-open":this.isOpen}},o("button",{class:"dropdown-button",onKeyDown:this.keyDownHandler,tabindex:"-1",onBlur:this.blurHandler,onFocus:this.focusHandler,disabled:this.disabled,onClick:()=>{this.toggleList()}},o("div",{class:"slot-container"},o("slot",null))),o("div",{class:"dropdown-content"},this.items?this.renderItems():o("slot",{name:"dropdown-content"}))))}get elm(){return s(this)}};a.style=h;export{a as goat_dropdown};
//# sourceMappingURL=p-8fcebb2b.entry.js.map