{"version":3,"names":["sliderCss","Slider","this","gid","getComponentIndex","computePercentageValue","percentageValue","value","max","min","onDragStart","event","disabled","readonly","DRAG_STOP_EVENT_TYPES","forEach","element","_a","elm","ownerDocument","addEventListener","onDragStop","DRAG_EVENT_TYPES","onDrag","hasFocus","removeEventListener","goatChange","emit","_onDrag","updateValue","clientX","current","start","slideElement","getBoundingClientRect","left","total","width","parseInt","String","goatInput","throttle","leading","trailing","blurHandler","focusHandler","setFocus","displayElement","focus","setBlur","nativeElement","blur","debounceChanged","debounceEvent","debounce","windowClick","evt","path","composedPath","getComponentId","hasValue","toString","length","componentWillLoad","getAttributeNames","name","includes","configAria","getAttribute","removeAttribute","connectedCallback","render","h","Host","class","slider","ref","onMouseDown","onTouchStart","onBlur","onFocus","tabIndex","style","size","e","stopPropagation"],"sources":["src/components/data-entry/slider/slider.scss?tag=goat-slider&encapsulation=shadow","src/components/data-entry/slider/slider.tsx"],"sourcesContent":["@import \"../common-input\";\r\n\r\n\r\n.slider-container {\r\n  display: flex;\r\n  align-items: center;\r\n  user-select: none;\r\n  gap: v(--spacing-05);\r\n\r\n  .slider-wrapper {\r\n    display: flex;\r\n    align-items: center;\r\n    user-select: none;\r\n    flex: 1;\r\n\r\n    .slider {\r\n      position: relative;\r\n      width: 100%;\r\n      min-width: 10rem;\r\n      padding: v(--spacing-05) 0;\r\n      margin: 0 1rem;\r\n      cursor: pointer;\r\n\r\n      .slider__thumb {\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 0;\r\n        width: 1rem;\r\n        height: 1rem;\r\n        background-color: v(--border-inverse);\r\n        border-radius: 50%;\r\n        transform: translateY(-50%);\r\n        transition: transform 0.2s ease-in-out;\r\n        z-index: 1;\r\n\r\n        &:hover {\r\n          transform: translateY(-50%) scale(1.2);\r\n        }\r\n      }\r\n\r\n      .slider__track {\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 0.125rem;\r\n        background-color: v(--layer-accent-01);\r\n        transform: translateY(-50%);\r\n      }\r\n\r\n      .slider__track--filled {\r\n        pointer-events: none;\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 0;\r\n        width: 20%;\r\n        height: 0.125rem;\r\n        background-color: v(--border-inverse);\r\n        transform: translateY(-50%);\r\n      }\r\n\r\n      &.has-focus {\r\n        .slider__thumb {\r\n          background-color: v(--color-primary);\r\n          transform: translateY(-50%) scale(1.2);\r\n        }\r\n\r\n        .slider__track--filled {\r\n          background-color: v(--color-primary);\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  .slide-input {\r\n    .input {\r\n      margin: 0;\r\n      width: 5rem;\r\n    }\r\n  }\r\n}\r\n","import { Component, ComponentInterface, Element, Event, EventEmitter, h, Host, Listen, Method, Prop, State, Watch } from '@stencil/core';\r\nimport { debounceEvent, getComponentIndex, DRAG_EVENT_TYPES, DRAG_STOP_EVENT_TYPES, throttle } from '../../../utils/utils';\r\n\r\n/**\r\n * @name Slider\r\n * @description Allows the user to select one or more options using a dropdown.\r\n * @category Form Inputs\r\n * @tags input, form\r\n * @img /assets/img/slider.png\r\n * @imgDark /assets/img/slider-dark.png\r\n */\r\n@Component({\r\n  tag: 'goat-slider',\r\n  styleUrl: 'slider.scss',\r\n  shadow: true,\r\n})\r\nexport class Slider implements ComponentInterface, InputComponentInterface {\r\n  gid: string = getComponentIndex();\r\n\r\n  /**\r\n   * The input field name.\r\n   */\r\n  @Prop() name: string = `goat-input-${this.gid}`;\r\n\r\n  @Prop() min: number = 0;\r\n\r\n  @Prop() max: number = 100;\r\n\r\n  /**\r\n   * The input field value.\r\n   */\r\n  @Prop({ mutable: true }) value?: number = 0;\r\n\r\n  /**\r\n   * If true, required icon is show. Defaults to `false`.\r\n   */\r\n  @Prop({ reflect: true }) required: boolean = false;\r\n\r\n  /**\r\n   * If true, the user cannot interact with the button. Defaults to `false`.\r\n   */\r\n  @Prop({ reflect: true }) disabled: boolean = false;\r\n\r\n  /**\r\n   * If true, the user cannot interact with the button. Defaults to `false`.\r\n   */\r\n  @Prop({ reflect: true }) readonly: boolean = false;\r\n\r\n  @Prop({ reflect: true, mutable: true }) configAria: any = {};\r\n\r\n  /**\r\n   * Set the amount of time, in milliseconds, to wait to trigger the `goatChange` event after each keystroke.\r\n   */\r\n  @Prop() debounce = 300;\r\n\r\n  /**\r\n   * Emitted when the value has changed.\r\n   */\r\n  @Event({ eventName: 'goat:change' }) goatChange: EventEmitter;\r\n  @Event({ eventName: 'goat:input' }) goatInput: EventEmitter;\r\n\r\n  /**\r\n   * Sets focus on the native `input` in `ion-input`. Use this method instead of the global\r\n   * `input.focus()`.\r\n   */\r\n  @Method()\r\n  async setFocus(): Promise<void> {\r\n    this.displayElement.focus();\r\n  }\r\n\r\n  /**\r\n   * Sets blur on the native `input` in `goat-input`. Use this method instead of the global\r\n   * `input.blur()`.\r\n   */\r\n  @Method()\r\n  async setBlur() {\r\n    if (this.nativeElement) {\r\n      this.nativeElement.blur();\r\n    }\r\n  }\r\n\r\n  @Watch('debounce')\r\n  protected debounceChanged() {\r\n    this.goatChange = debounceEvent(this.goatChange, this.debounce);\r\n    this.goatInput = debounceEvent(this.goatInput, this.debounce);\r\n  }\r\n\r\n  @Listen('click', { target: 'window' })\r\n  windowClick(evt) {\r\n    const path = evt.path || evt.composedPath();\r\n    for (const elm of path) {\r\n      if (elm == this.elm) return;\r\n    }\r\n  }\r\n\r\n  @Method()\r\n  async getComponentId() {\r\n    return this.gid;\r\n  }\r\n\r\n  @Element() elm!: HTMLElement;\r\n  private nativeElement?: HTMLInputElement;\r\n  @State() hasFocus = false;\r\n  @State() percentageValue = 0;\r\n  @State() needsOnRelease = false;\r\n  private displayElement?: HTMLElement;\r\n\r\n  private hasValue(): boolean {\r\n    return (this.value || '').toString().length > 0;\r\n  }\r\n\r\n  computePercentageValue = () => {\r\n    this.percentageValue = (this.value / (this.max - this.min)) * 100;\r\n  };\r\n\r\n  componentWillLoad() {\r\n    this.elm.getAttributeNames().forEach((name: string) => {\r\n      if (name.includes('aria-')) {\r\n        this.configAria[name] = this.elm.getAttribute(name);\r\n        this.elm.removeAttribute(name);\r\n      }\r\n    });\r\n    this.computePercentageValue();\r\n  }\r\n\r\n  onDragStart = event => {\r\n    // Do nothing if component is disabled\r\n    if (this.disabled || this.readonly) {\r\n      return;\r\n    }\r\n\r\n    // Register drag stop handlers\r\n    DRAG_STOP_EVENT_TYPES.forEach(element => {\r\n      this.elm?.ownerDocument.addEventListener(element, this.onDragStop);\r\n    });\r\n\r\n    // Register drag handlers\r\n    DRAG_EVENT_TYPES.forEach(element => {\r\n      this.elm?.ownerDocument.addEventListener(element, this.onDrag);\r\n    });\r\n\r\n    this.hasFocus = true;\r\n\r\n    //@ts-ignore\r\n    this.onDrag(event);\r\n  };\r\n\r\n  /**\r\n   * Unregisters \"drag\" and \"drag stop\" event handlers and calls sets the flag\r\n   * indicating that the `onRelease` callback should be called.\r\n   */\r\n  onDragStop = () => {\r\n    // Do nothing if component is disabled\r\n    if (this.disabled || this.readonly) {\r\n      return;\r\n    }\r\n\r\n    // Remove drag stop handlers\r\n    DRAG_STOP_EVENT_TYPES.forEach(element => {\r\n      this.elm?.ownerDocument.removeEventListener(element, this.onDragStop);\r\n    });\r\n\r\n    // Remove drag handlers\r\n    DRAG_EVENT_TYPES.forEach(element => {\r\n      this.elm?.ownerDocument.removeEventListener(element, this.onDrag);\r\n    });\r\n\r\n    this.goatChange.emit({\r\n      value: this.value,\r\n    });\r\n  };\r\n\r\n  _onDrag = event => {\r\n    // Do nothing if component is disabled\r\n    if (this.disabled || this.readonly) {\r\n      return;\r\n    }\r\n\r\n    this.updateValue(event.clientX);\r\n  };\r\n\r\n  updateValue = current => {\r\n    const start = this.slideElement.getBoundingClientRect().left;\r\n    const total = this.slideElement.getBoundingClientRect().width;\r\n    this.value = parseInt(String(((current - start) / total) * 100));\r\n    if (this.value > this.max) {\r\n      this.value = this.max;\r\n    } else if (this.value < this.min) {\r\n      this.value = this.min;\r\n    }\r\n\r\n    this.computePercentageValue();\r\n\r\n    this.goatInput.emit({\r\n      value: this.value,\r\n    });\r\n  };\r\n\r\n  onDrag = throttle(this._onDrag, 1, {\r\n    leading: true,\r\n    trailing: false,\r\n  });\r\n\r\n  connectedCallback() {\r\n    this.debounceChanged();\r\n  }\r\n\r\n  private slideElement?: HTMLElement;\r\n\r\n  private blurHandler = () => {\r\n    this.hasFocus = false;\r\n  };\r\n\r\n  private focusHandler = () => {\r\n    this.hasFocus = true;\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Host has-value={this.hasValue()} has-focus={this.hasFocus}>\r\n        <div class=\"slider-container\">\r\n          <div class=\"slider-wrapper\">\r\n            <div class=\"slider-range-label\">\r\n              <span>{this.min}</span>\r\n            </div>\r\n            <div class={{ 'slider': true, 'has-focus': this.hasFocus }} ref={elm => (this.slideElement = elm)} onMouseDown={this.onDragStart} onTouchStart={this.onDragStart}>\r\n              <div class=\"slider__thumb\" onBlur={this.blurHandler} onFocus={this.focusHandler} tabIndex={0} style={{ left: `${this.percentageValue}%` }}></div>\r\n              <div class=\"slider__track\"></div>\r\n              <div class=\"slider__track--filled\" style={{ width: `${this.percentageValue}%` }}></div>\r\n            </div>\r\n            <div class=\"slider-range-label\">\r\n              <span>{this.max}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"slide-input\">\r\n            <goat-number\r\n              class=\"input\"\r\n              value={this.value}\r\n              size=\"sm\"\r\n              hide-actions={true}\r\n              onGoat:change={e => {\r\n                e.stopPropagation();\r\n              }}\r\n              onGoat:input={e => {\r\n                e.stopPropagation();\r\n              }}\r\n            ></goat-number>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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"}